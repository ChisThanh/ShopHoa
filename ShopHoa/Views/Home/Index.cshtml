@model ShopHoa.Models.Flower[]
@using ShopHoa.Helpers

@{
ViewBag.Title = "Index";
Layout = "~/Views/Shared/Master.cshtml";
}



<!-- Slider/Intro Section Start -->
<div class="intro11-slider-wrap section-2">
    <div class="intro11-slider swiper-container">
        <div class="swiper-wrapper">
            <div class="intro11-section swiper-slide slide-5 slide-bg-1 bg-position">
                <!-- Bắt đầu nội dung giới thiệu -->
                <div class="intro11-content-2 text-center">
                    <h1 class="different-title">Chất lượng</h1>
                    <h2 class="title text-white">Món quà hoa</h2>
                    <a href="#" class="btn flosun-button  secondary-btn theme-color rounded-0">Bộ sưu tập cửa hàng</a>
                </div>
                <!-- Nội dung giới thiệu Kết thúc -->
            </div>
            <div class="intro11-section swiper-slide slide-6 slide-bg-1 bg-position">
                <!-- Bắt đầu nội dung giới thiệu -->
                <div class="intro11-content-2 text-center">
                    <h1 class="different-title">Chào mừng</h1>
                    <h2 class="title">Xu hướng hoa năm 2022</h2>
                    <a href="product-details.html" class="btn flosun-button  secondary-btn theme-color rounded-0">Bộ sưu
                        tập cửa hàng</a>
                </div>
                <!-- Nội dung giới thiệu Kết thúc -->
            </div>
        </div>
        <!-- Điều hướng thanh trượt -->
        <div class="home1-slider-prev swiper-button-prev main-slider-nav"><i class="lnr lnr-arrow-left"></i></div>
        <div class="home1-slider-next swiper-button-next main-slider-nav"><i class="lnr lnr-arrow-right"></i></div>
        <!-- Điều hướng thanh trượt -->
        <div class="swiper-pagination"></div>
    </div>
</div>

<!-- Slider/Intro Section End -->
<!-- Shop Collection Start Here -->
<div class="shop-collection-area gray-bg pt-no-text pb-no-text">
    <div class="container custom-area">
        <div class="row mb-30">
            <div class="col-md-6 col-custom">
                <div class="collection-content">
                    <div class="section-title text-left">
                        <span class="section-title-1">Hoa dành cho</span>
                        <h3 class="section-title-3 pb-0">Quà sinh nhật</h3>
                    </div>
                    <div class="desc-content">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                            incididunt
                            ut labore et dolore magna aliqua. Bạn có thể tối thiểu hóa lợi ích của mình.
                        </p>
                    </div>
                    <a href="shop.html" class="btn flosun-button secondary-btn rounded-0">Bộ sưu tập cửa hàng</a>
                </div>
            </div>
            <div class="col-md-6 col-custom">
                <!--Bắt đầu khu vực biểu ngữ đơn-->
                <div class="single-banner hover-style">
                    <div class="banner-img">
                        <a href="#">
                            <img src="/assets/images/collection/1-1.jpg" alt="">
                            <div class="overlay-1"></div>
                        </a>
                    </div>
                </div>
                <!--Cuối khu vực biểu ngữ đơn-->
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-custom order-2 order-md-1">
                <!--Bắt đầu khu vực biểu ngữ đơn-->
                <div class="single-banner hover-style">
                    <div class="banner-img">
                        <a href="#">
                            <img src="/assets/images/collection/1-2.jpg" alt="">
                            <div class="overlay-1"></div>
                        </a>
                    </div>
                </div>
                <!--Cuối khu vực biểu ngữ đơn-->
            </div>
            <div class="col-md-6 col-custom order-1 order-md-2">
                <div class="collection-content">
                    <div class="section-title text-left">
                        <span class="section-title-1">Hoa dành cho</span>
                        <h3 class="section-title-3 pb-0">Ngày cưới</h3>
                    </div>
                    <div class="desc-content">
                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
                            incididunt
                            ut labore et dolore magna aliqua. Bạn có thể tối thiểu hóa lợi ích của mình.
                        </p>
                    </div>
                    <a href="shop.html" class="btn flosun-button secondary-btn rounded-0">Bộ sưu tập cửa hàng</a>
                </div>
            </div>
        </div>
    </div>
</div><!-- Shop Collection End Here -->
<!--Product Area Start-->
<div class="product-area mt-text-3">
    <div class="container custom-area-2 overflow-hidden">
        <div class="row">
            <!--Section Title Start-->
            <div class="col-12 col-custom">
                <div class="section-title text-center mb-30">
                    <span class="section-title-1">The Most Trendy</span>
                    <h3 class="section-title-3">Featured Products</h3>
                </div>
            </div>
            <!--Section Title End-->
        </div>
        <div class="row product-row">
            <div class="col-12 col-custom">
                <div class="product-slider swiper-container anime-element-multi">
                    <div class="swiper-wrapper">
                        @for (int i = 0; i < Model.Count() - 1; i +=2) { <div class="single-item swiper-slide">
                            @for (int j = i; j <= i + 1; j++) { <div class="single-product position-relative mb-30">
                                <div class="product-image">
                                    <a class="d-block" href="/flower/ShowDetailFlower?id=@Model[j].IdFlower">
                                        <img src="~/assets/images/product/@Model[i].Image" alt="" class="product-image-1 w-100">
                                        <img src="~/assets/images/product/2.jpg" alt=""
                                            class="product-image-2 position-absolute w-100">
                                    </a>
                                    @*<span class="onsale">Sale!</span>*@
                                    <div class="add-action d-flex flex-column position-absolute">
                                        <a href="" title="Xem chi tiết">
                                            <i class="lnr lnr-eye" data-toggle="tooltip" data-placement="left"
                                                title="Xem chi tiết"></i>
                                        </a>
                                        <a href="##" class="btnn" data-id="@Model[j].IdFlower.Trim()">
                                            <i class="lnr lnr-cart" data-toggle="tooltip" data-placement="left"
                                                title="Thêm vào giỏ hàng"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="product-content">
                                    <div class="product-title">
                                        <h4 class="title-2">
                                            <a href="##" id="nameFlower">
                                                @Model[j].NameFlower
                                            </a>
                                        </h4>
                                    </div>
                                    <div class="product-rating">
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star"></i>
                                        <i class="fa fa-star-o"></i>
                                        <i class="fa fa-star-o"></i>
                                    </div>
                                    <div class="price-box">
                                        <span class="regular-price ">@Helper.FormatNumber(Model[j].Price ?? 0.0)
                                            VNĐ</span>
                                        <span class="old-price"><del>$90.00</del></span>
                                    </div>
                                    <a href="~/Cart" class="btn product-cart">Add to Cart</a>
                                </div>
                    </div>

                    }
                </div>
                }
            </div>
            <!-- Slider pagination -->
            <div class="swiper-pagination default-pagination"></div>
        </div>
    </div>
</div>
</div>
</div>
<!--Product Area End-->
<!-- Banner Area Start Here -->
<div class="banner-area mt-text-3">
    <div class="container custom-area">
        <div class="row">
            <div class="col-md-6 col-custom">
                <!--Single Banner Area Start-->
                <div class="single-banner hover-style mb-30">
                    <div class="banner-img">
                        <a href="#">
                            <img src="~/assets/images/banner/1-1.jpg" alt="">
                            <div class="overlay-1"></div>
                        </a>
                    </div>
                </div>
                <!--Single Banner Area End-->
            </div>
            <div class="col-md-6 col-custom">
                <!--Single Banner Area Start-->
                <div class="single-banner hover-style mb-30">
                    <div class="banner-img">
                        <a href="#">
                            <img src="~/assets/images/banner/1-3.jpg" alt="">
                            <div class="overlay-1"></div>
                        </a>
                    </div>
                </div>
                <!--Single Banner Area End-->
            </div>
        </div>
    </div>
</div>
<!-- Banner Area End Here -->
<!-- Newsletter Area Start Here -->
<div class="news-letter-area gray-bg pt-no-text pb-no-text mt-text-3">
    <div class="container custom-area">
        <div class="row align-items-center">
            <!--Bắt đầu phần tiêu đề -->
            <div class="col-md-6 col-custom">
                <div class="section-title text-left mb-35">
                    <h3 class="section-title-3">Gửi bản tin</h3>
                    <p class="desc-content mb-0">
                        Nhập địa chỉ email của bạn cho danh sách gửi thư của chúng tôi để giữ cho riêng bạn
                        Cập nhật
                    </p>
                </div>
            </div>
            <!--Kết thúc phần tiêu đề-->
            <div class="col-md-6 col-custom">
                <div class="news-latter-box">
                    <div class="newsletter-form-wrap text-center">
                        <form id="mc-form" class="mc-form">
                            <input type="email" id="mc-email" class="form-control email-box"
                                placeholder="email@example.com" name="EMAIL">
                            <button id="mc-submit" class="btn rounded-0" type="submit">Đặt mua</button>
                        </form>
                        <!-- mailchimp-alerts Bắt đầu -->
                        <div class="mailchimp-alerts text-centre">
                            <div class="mailchimp-submitting"></div><!-- kết thúc gửi mailchimp -->
                            <div class="mailchimp-success text-success"></div>
                            <!-- kết thúc thành công của mailchimp -->
                            <div class="mailchimp-error text-danger"></div><!-- kết thúc lỗi mailchimp -->
                        </div>
                        <!-- mailchimp-alerts Kết thúc -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Newsletter Area End Here -->
<!-- Blog Area Start Here -->
<div class="blog-post-area mt-text-3">
    <div class="container custom-area">
        <div class="row">
            <!--Bắt đầu phần tiêu đề -->
            <div class="col-12">
                <div class="section-title text-center mb-30">
                    <span class="section-title-1">Từ blog</span>
                    <h3 class="section-title-3">Bài viết mới nhất của chúng tôi</h3>
                </div>
            </div>
            <!--Kết thúc phần tiêu đề-->
        </div>
        <div class="row">
            <div class="col-12 col-md-4 col-lg-4 col-custom mb-30">
                <div class="blog-lst">
                    <div class="single-blog">
                        <div class="blog-image">
                            <a class="d-block" href="blog-details-fullwidth.html">
                                <img src="/assets/images/blog/blog1.jpg" alt="Blog Image" class="w-100">
                            </a>
                        </div>
                        <div class="blog-content">
                            <div class="blog-text">
                                <h4><a href="blog-details-fullwidth.html">Bài đăng blog tiêu chuẩn một</a></h4>
                                <div class="blog-post-info">
                                    <span><a href="#">Bởi quản trị viên</a></span>
                                    <span>December 18, 2022</span>
                                </div>
                                <p>
                                    Lorem ipsu dolor sit amet cons elits cumque adipisicing, sed do incid eiusmod
                                    tempor ut labore et dolore eveniet .
                                </p>
                                <a href="blog-details-fullwidth.html" class="readmore">
                                    Đọc thêm <i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-4 col-lg-4 col-custom mb-30">
                <div class="blog-lst">
                    <div class="single-blog">
                        <div class="blog-image">
                            <a class="d-block" href="blog-details-fullwidth.html">
                                <img src="/assets/images/blog/blog3.jpg" alt="Blog Image" class="w-100">
                            </a>
                        </div>
                        <div class="blog-content">
                            <div class="blog-text">
                                <h4><a href="blog-details-fullwidth.html">Bài đăng blog tiêu chuẩn thứ hai</a></h4>
                                <div class="blog-post-info">
                                    <span><a href="#">Bởi quản trị viên</a></span>
                                    <span>December 18, 2022</span>
                                </div>
                                <p>
                                    Lorem ipsu dolor sit amet cons elits cumque adipisicing, sed do incid eiusmod
                                    tempor ut labore et dolore eveniet .
                                </p>
                                <a href="blog-details-fullwidth.html" class="readmore">
                                    Đọc thêm <i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-4 col-lg-4 col-custom mb-30">
                <div class="blog-lst">
                    <div class="single-blog">
                        <div class="blog-image">
                            <a class="d-block" href="blog-details-fullwidth.html">
                                <img src="/assets/images/blog/blog2.jpg" alt="Blog Image" class="w-100">
                            </a>
                        </div>
                        <div class="blog-content">
                            <div class="blog-text">
                                <h4><a href="blog-details-fullwidth.html">Bài đăng blog tiêu chuẩn thứ ba</a></h4>
                                <div class="blog-post-info">
                                    <span><a href="#">Bởi quản trị viên</a></span>
                                    <span>December 18, 2022</span>
                                </div>
                                <p>
                                    Lorem ipsu dolor sit amet cons elits cumque adipisicing, sed do incid eiusmod
                                    tempor ut labore et dolore eveniet .
                                </p>
                                <a href="blog-details-fullwidth.html" class="readmore">
                                    Đọc thêm <i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div><!-- Blog Area End Here -->
<!-- Brand Logo Area Start Here -->
<div class="brand-logo-area gray-bg pt-no-text pb-no-text mt-text-5">
    <div class="container custom-area">
        <div class="row">
            <div class="col-12 col-custom">
                <div class="brand-logo-carousel swiper-container intro11-carousel-wrap arrow-style-3">
                    <div class="swiper-wrapper">
                        <div class="single-brand swiper-slide">
                            <a href="#">
                                <img src="~/assets/images/brand/1.png" alt="Brand Logo">
                            </a>
                        </div>
                        <div class="single-brand swiper-slide">
                            <a href="#">
                                <img src="~/assets/images/brand/2.png" alt="Brand Logo">
                            </a>
                        </div>
                        <div class="single-brand swiper-slide">
                            <a href="#">
                                <img src="~/assets/images/brand/3.png" alt="Brand Logo">
                            </a>
                        </div>
                        <div class="single-brand swiper-slide">
                            <a href="#">
                                <img src="~/assets/images/brand/4.png" alt="Brand Logo">
                            </a>
                        </div>
                        <div class="single-brand swiper-slide">
                            <a href="#">
                                <img src="~/assets/images/brand/5.png" alt="Brand Logo">
                            </a>
                        </div>
                    </div>
                    <!-- Slider Navigation -->
                    <div class="home1-slider-prev swiper-button-prev main-slider-nav">
                        <i class="lnr lnr-arrow-left"></i>
                    </div>
                    <div class="home1-slider-next swiper-button-next main-slider-nav">
                        <i class="lnr lnr-arrow-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Models{
<div class="modal flosun-modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-hidden="true"></div>
}


@section js{
<script>
    $(document).on('click', '.btnn', function () {
        var $dataId = $(this).data('id');
        $.ajax({
            type: "GET",
            url: `/api/Product/${$dataId}`,
            success: function (response) {
                $('#exampleModalCenter').html(`
                        <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <button type="button" class="close close-button" data-bs-dismiss="modal" aria-label="Close">
                                <span class="close-icon" aria-hidden="true">x</span>
                            </button>
                            <div class="modal-body">
                                <div class="container-fluid custom-area">
                                    <div class="row">
                                        <div class="col-md-6 col-custom">
                                            <div class="modal-product-img">
                                                <a class="w-100" href="#">
                                                    <img id="imgMD" class="w-100" src="/assets/images/product/large-size/${response.Image}" alt="Product">
                                                </a>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-custom">
                                            <div class="modal-product">
                                                <div class="product-content">
                                                    <div class="product-title">
                                                        <h4 class="title">${response.NameFlower}</h4>
                                                    </div>
                                                    <div class="price-box">
                                                        <span class="regular-price">${response.Price} VMĐ</span>
                                                        <span class="old-price"><del>$90.00</del></span>
                                                    </div>
                                                    <div class="product-rating">
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star-o"></i>
                                                        <i class="fa fa-star-o"></i>
                                                        <span>1 Review</span>
                                                    </div>
                                                    <p class="desc-content">
                                                        we denounce with righteous indignation and dislike men
                                                        who are so beguiled and demoralized by the charms of pleasure of the moment,
                                                        so blinded by desire, that they cannot foresee the pain and trouble that are
                                                        bound to ensue; and equal blame bel...
                                                    </p>
                                                    dialog  <div class="quantity-with-btn">
                                                        <div class="quantity">
                                                            <div class="cart-plus-minus">
                                                                <input class="cart-plus-minus-box" value="0" type="text">
                                                                <div class="dec qtybutton">-</div>
                                                                <div class="inc qtybutton">+</div>
                                                                <div class="dec qtybutton"><i class="fa fa-minus"></i></div>
                                                                <div class=" qtybutton"><i class="fa fa-plus"></i></div>
                                                            </div>
                                                        </div>
                                                        <div class="add-to_btn">
                                                            <a class="btn product-cart button-icon flosun-button dark-btn"
                                                               id="btnAddCart" data-id="${$dataId}" href="##">Add to cart</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                        `);
                $('#exampleModalCenter').modal('show');
                $(".qtybutton").trigger("click");
            },
            error: function (response) {
                alert("Api lỗi");
            }
        });

    });

    $(document).on("click", ".qtybutton", function () {
        var $button = $(this);
        var oldValue = $button.parent().find('input').val();
        if ($button.hasClass('inc')) {
            var newVal = parseFloat(oldValue) + 1;
        } else {
            if (oldValue > 1) {
                var newVal = parseFloat(oldValue) - 1;
            } else {
                newVal = 1;
            }
        }
        $button.parent().find('input').val(newVal);
    });

    $(document).on("click", "#btnAddCart", function () {
        var parent = $(this).closest('.modal-body');
        var quantity = parseFloat($('.cart-plus-minus-box').val());
        var price = parseInt(parent.find('.regular-price').text().replace(/\D/g, ''), 10);
        var img = $("#imgMD").attr('src');
        var id = $(this).data(id).id;
        var name = parent.find('.product-title .title').text().trim();
        cart.setItem(id, name, img, price, quantity);
        loadCartMini();
        helper.showNotification('top', 'center');
        $('#exampleModalCenter').modal('hide');
    })
</script>

}